@tailwind base;
@tailwind components;
@tailwind utilities;

/* Aggressive Reset */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

/* Global Layout Reset for Full Screen Canvas */
html, body, #root {
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden; /* Prevent scrollbars for immersive experience */
  position: fixed; /* Force fix to viewport to prevent iOS bounce/overscroll */
  top: 0;
  left: 0;
}

/* Ensure application container fills the screen but does NOT scroll itself */
.App {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  overflow: hidden; /* App container should not scroll, let page-content handle it */
}

/* Page Content handles the scrolling */
.page-content {
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  left: 0;
  overflow-y: auto; /* Enable vertical scrolling for content pages */
  overflow-x: hidden; /* Prevent horizontal scroll */
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}

/* 
 * CRITICAL FIX: Eliminate gap below canvas
 * By default, canvas is an inline element, which sits on the baseline 
 * and leaves a small gap (descender space) below it.
 * Setting display: block removes this gap.
 */
canvas {
  display: block;
  width: 100%;
  height: 100%;
  outline: none;
  touch-action: none; /* Prevent touch gestures from interfering with canvas controls */
}

/* 
 * FORCEFUL FIX for MusicUniverse Canvas Container
 * This targets the wrapper div created by @react-three/fiber
 * ensuring it absolutely fills the screen with NO gaps.
 */
.music-universe-canvas {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  display: block !important;
  z-index: 1; /* Ensure it sits correctly in the stack */
}

/* Ensure the canvas element INSIDE the wrapper is also strictly controlled */
.music-universe-canvas canvas {
  display: block !important;
  width: 100% !important;
  height: 100% !important;
  outline: none !important;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * ğŸš€ å®‡å®™ä¹ç«  Â· æ˜Ÿäº‘è½¨é“æ»šåŠ¨æ¡ - ä¼˜åŒ–ç‰ˆ
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€*/

/* WebKit åŸºç¡€ */
::-webkit-scrollbar {
  /* æ»šåŠ¨æ¡å®½åº¦ï¼Œç•¥å¾®å˜çª„ï¼Œæ›´ç²¾è‡´ */
  width: 10px;
  height: 10px;
}

/* è½¨é“ (Track): æ·±è‰²èƒŒæ™¯ + ç¼“æ…¢æµåŠ¨çš„æ˜Ÿç‚¹ */
::-webkit-scrollbar-track {
  /* ä¿æŒåŸæœ‰çš„æ˜Ÿäº‘æµåŠ¨èƒŒæ™¯ */
  background: radial-gradient(
      circle at 30% 20%,
      rgba(255, 255, 255, 0.08) 0%,
      rgba(0, 0, 0, 0) 45%
    ),
    radial-gradient(
      circle at 70% 80%,
      rgba(255, 255, 255, 0.05) 0%,
      rgba(0, 0, 0, 0) 55%
    ),
    linear-gradient(
      to bottom,
      #0f172a, /* åŸºç¡€æ·±è“è‰² */
      #1e1b4b 35%, /* æ·±ç´«è“è‰² */
      #312e81 65%, /* äº®ç´«è“è‰² */
      #0f172a 100%
    );
  background-size: 200% 200%;
  animation: nebulaFlow 12s ease-in-out infinite;
  border-radius: 10px;
}

/* æ»‘å— (Thumb): èšç„¦è“ç´«æ¸å˜ï¼Œå¢å¼ºç§‘æŠ€å…‰æ™• */
::-webkit-scrollbar-thumb {
  /* ç»Ÿä¸€ä¸ºæ·±ç©ºè“ç´«æ¸å˜ï¼Œä¸èƒŒæ™¯è‰²è°ƒæ›´ä¸€è‡´ */
  background: linear-gradient(
    90deg,
    #7c3aed 0%, /* äº®ç´«è‰² */
    #4f46e5 50%, /* é›è“è‰² */
    #2563eb 100% /* äº®è“è‰² */
  ) !important;
  border-radius: 10px;
  /* ç•¥å¾®å‡å°è¾¹æ¡†å®½åº¦ */
  border: 1px solid rgba(255, 255, 255, 0.2);
  /* è°ƒæ•´é˜´å½±ï¼Œæ›´èšç„¦äºè“ç´«å…‰æ™• */
  box-shadow:
    0 0 8px rgba(124, 58, 237, 0.7),
    0 0 16px rgba(37, 99, 235, 0.5);
  transition: all 0.3s ease; /* å»¶é•¿è¿‡æ¸¡æ—¶é—´ï¼Œæ›´å¹³æ»‘ */
}

/* æ»‘å— hover æ—¶çš„å¾‹åŠ¨è„‰å†²æ•ˆæœ */
::-webkit-scrollbar-thumb:hover {
  transform: scale(1.05); /* ç¼©æ”¾å¹…åº¦å‡å°ï¼Œæ›´ç¨³å®š */
  box-shadow:
    0 0 12px rgba(124, 58, 237, 0.9),
    0 0 24px rgba(37, 99, 235, 0.7),
    inset 0 0 2px rgba(255, 255, 255, 0.6);
}

/* æ»‘å—ç‚¹å‡»æ—¶ Â· èŠ‚å¥æ”¶ç¼© */
::-webkit-scrollbar-thumb:active {
  transform: scale(0.95); /* ç¼©æ”¾å¹…åº¦å‡å° */
  box-shadow:
    0 0 4px rgba(124, 58, 237, 0.5),
    0 0 10px rgba(37, 99, 235, 0.4),
    inset 0 0 4px rgba(255, 255, 255, 0.5);
}

/* è§’è½ */
::-webkit-scrollbar-corner {
  background: transparent;
}

/* Firefox */
* {
  scrollbar-width: thin;
  scrollbar-color: #4f46e5 #1e1b4b; /* æ»‘å—é¢œè‰² è½¨é“é¢œè‰² */
}

/* æ˜Ÿäº‘æµåŠ¨åŠ¨ç”»ä¿æŒä¸å˜ */
@keyframes nebulaFlow {
  0% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 100% 100%;
  }
  100% {
    background-position: 0% 0%;
  }
}

.evening-symmetric {
  background: linear-gradient(to bottom,
    #1e1b4b 0%,   /* Indigo 950 - æ·±é‚ƒå¤œè‰²ç´«è“ */
    #1e3a8a 15%,  /* Blue 900 - æ·±è“ */
    #3b82f6 30%,  /* Blue 500 - å‚æ™šè“ */
    #fef3c7 40%,
    #fde68a 45%,
    #fb923c 50%,
    #dc2626 55%,
    #fb923c 60%,
    #fde68a 65%,
    #fef3c7 70%,
    #3b82f6 85%,
    #1e3a8a 95%,
    #1e1b4b 100%  /* Indigo 950 - æ·±æ°´å¤œè‰² */
  );
}

.loading-spinner-inner-glow {
  transform: scale(1);
  transition: transform 1.5s ease-in-out;
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.5), 0 0 40px rgba(34, 211, 238, 0.3);
}

/* ç§»åŠ¨ç«¯ä¼˜åŒ–æ ·å¼ - Consolidating here */
@media screen and (max-width: 768px) {
  /* ä¼˜åŒ–ç§»åŠ¨ç«¯å­—ä½“å¤§å° */
  h1 { font-size: 1.8rem !important; }
  h2 { font-size: 1.5rem !important; }
  h3 { font-size: 1.2rem !important; }
  p, span, div { font-size: 0.95rem !important; }
}
